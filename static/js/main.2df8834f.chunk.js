(this["webpackJsonpbaby-tracker-front"]=this["webpackJsonpbaby-tracker-front"]||[]).push([[0],{37:function(e,t,n){},41:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(17),s=n.n(r),a=n(8),i=n(12),o=(n(37),n(10)),u=n(11),l=n(4),d=n(23),m=n(26),j=(n(41),n(1)),b=function(e){var t=e.measurement;return Object(j.jsx)(u.a,{children:Object(j.jsxs)(u.b,{to:"/measure/".concat(t.id),className:"measurement link bg-cover col cross-center main-center",children:[t.list&&t.list.length?Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"amount",children:"".concat(t.list[t.list.length-1].amount," ").concat(t.unit)}),t.list[t.list.length-2]?Object(j.jsxs)("div",{className:"row main-center dif",style:{color:t.list[t.list.length-1].amount>t.list[t.list.length-2].amount?"green":"red"},children:[t.list[t.list.length-1].amount>t.list[t.list.length-2].amount?"+":"",(t.list[t.list.length-1].amount-t.list[t.list.length-2].amount).toFixed(2)]}):Object(j.jsx)("div",{})]}):Object(j.jsx)("div",{className:"amount new",children:"Add new"}),Object(j.jsx)("div",{className:"type",children:t.item})]})})};b.defaultProps={measurement:{}};var h=b,O=(n(44),function(){var e=Object(a.c)((function(e){return e.measurements}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"row wrap",children:e.map((function(e){return Object(j.jsx)(h,{measurement:e},e.id)}))})})}),f=function(e,t,n){var c={method:e,headers:{"Content-Type":"application/json",token:localStorage.token}};return"POST"===e&&(c.body=JSON.stringify(n)),new Request("".concat("https://suyash-baby-tracker.herokuapp.com/").concat(t),c)},x=(n(45),function(e){var t=e.list,n=e.itemKey,c=e.displayAttr,r=e.toAddAttr,s=e.addItem,a=e.unit;return Object(j.jsxs)("div",{className:"list",children:[Object(j.jsx)("div",{className:"items",children:t.map((function(e){return Object(j.jsx)("div",{className:"row link",children:c.map((function(t){return Object(j.jsx)("div",{className:"flex item",children:Object(j.jsx)("div",{children:"".concat(e[t]," ").concat("amount"===t?a:"")})},t)}))},e[n])}))}),Object(j.jsxs)("form",{onSubmit:s,className:"row main-center wrap",children:[r.map((function(e){return Object(j.jsx)("input",{type:"text",name:e,placeholder:e},e)})),Object(j.jsx)("input",{type:"submit",value:"Add New",className:"link"})]})]})});x.defaultProps={list:[],unit:""};var p=x,v=function(){var e=Object(a.b)(),t=Object(l.g)().id,n=Object(c.useState)({}),r=Object(o.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),d=Object(o.a)(u,2),m=d[0],b=d[1],h=Object(a.c)((function(e){return e.measurements}));return Object(c.useEffect)((function(){!function(){for(var e=0;e<h.length;e+=1)if(h[e].id===parseInt(t,10)){i(h[e]);break}}()})),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"row cross-center main-center",children:Object(j.jsxs)("div",{className:"w-100 h-100",children:[Object(j.jsx)(p,{list:s.list,itemKey:"created_at",displayAttr:["date","amount"],toAddAttr:["amount"],unit:s.unit,addItem:function(t){t.preventDefault();var n={amount:t.target.amount.value,measure_id:s.id};fetch(f("POST","measurements/create",n)).then((function(e){if(b(""),!e.ok)throw Error(e.statusText);return e.json()})).then((function(c){c.measurement&&(n=c.measurement,t.target.amount.value="",e(function(e,t){return{type:"ADD_MEASUREMENT",measureId:e,measurement:t}}(s.id,n)),window.location.reload())})).catch((function(){b("Couldn't add Measurement!")}))}}),Object(j.jsx)("div",{className:"error row main-center cross-center",children:m})]})})})},g=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],d=i[1],m=Object(a.b)(),b=Object(a.c)((function(e){return e.measurements}));return Object(c.useEffect)((function(){localStorage.token&&fetch(f("GET","users/admin")).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){e.admin||r(!0)})).catch((function(){r(!0)}))})),Object(j.jsx)("div",{children:n?Object(j.jsx)(l.a,{to:"/"}):Object(j.jsxs)("div",{children:[Object(j.jsx)(p,{list:b,itemKey:"item",displayAttr:["item","unit"],toAddAttr:["item","unit"],addItem:function(e){e.preventDefault();var t={item:e.target.item.value,unit:e.target.unit.value};fetch(f("POST","measures/create",t)).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(n){n.id&&(t.id=n.id,e.target.item.value="",e.target.unit.value="",m(function(e){return{type:"ADD_MEASURE",measure:e}}(t)))})).catch((function(){d("Couldn't add new Measure!")}))}}),Object(j.jsx)("div",{className:"error row main-center cross-center",children:u})]})})},w=(n(46),function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),i=a[0],u=a[1];return Object(j.jsxs)("div",{className:"login",children:[n?Object(j.jsx)("div",{className:"col cross-center main-center",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch(f("POST","users/login",{name:e.target.name.value,password:e.target.password.value})).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){e.token&&(localStorage.token=e.token,window.location.reload())})).catch((function(){u("Couldn't Sign In!")}))},className:"col cross-center",children:[Object(j.jsx)("h2",{children:"Sign In"}),Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(j.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(j.jsx)("input",{type:"submit",value:"Sign In",className:"link w-90"}),Object(j.jsx)("button",{type:"button",onClick:function(){r(!1)},className:"link button w-90",children:"or create new account"})]})}):Object(j.jsx)("div",{className:"col cross-center main-center",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch(f("POST","users/create",{name:e.target.name.value,password:e.target.password.value})).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){e.token&&(localStorage.token=e.token,window.location.reload())})).catch((function(){u("Couldn't Sign Up!")}))},className:"col cross-center",children:[Object(j.jsx)("h2",{children:"Create new account"}),Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(j.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(j.jsx)("input",{type:"submit",value:"Sign Up",className:"link w-90"}),Object(j.jsx)("button",{type:"button",onClick:function(){r(!0)},className:"link button w-90",children:"Go to Sign In page"})]})}),Object(j.jsx)("div",{className:"error row main-center cross-center",children:i})]})}),S=(n(47),function(){var e=Object(a.b)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1];Object(c.useEffect)((function(){localStorage.token&&fetch(f("GET","measurements/fetch")).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){if(t.measures&&t.measurements)for(var n=0;n<t.measures.length;n+=1){var c=t.measures[n];c.list=[];for(var r=0;r<t.measurements.length;r+=1){var s=t.measurements[r],a=new Date(s.created_at);s.date=a.toLocaleString("default",{day:"numeric",month:"long",year:"numeric"}),s.measure_id===c.id&&c.list.push(s)}}e({type:"SET_MEASUREMENTS",measurements:t.measures})})).catch((function(){s("Couldn't fetch Measurements!")}))}));return Object(j.jsx)("div",{children:localStorage.token?Object(j.jsxs)(u.a,{children:[Object(j.jsx)("div",{className:"error row main-center cross-center",children:r}),Object(j.jsxs)("header",{className:"row main-space-around",children:[Object(j.jsxs)(u.b,{to:"/",className:"col cross-center main-center shadow-5 link flex",children:[Object(j.jsx)(d.a,{icon:m.a,children:"Sign Out"}),Object(j.jsx)("span",{children:"Home"})]}),Object(j.jsxs)("button",{type:"button",onClick:function(){localStorage.clear(),window.location.reload()},className:"link col cross-center main-center flex",children:[Object(j.jsx)(d.a,{icon:m.b,children:"Sign Out"}),Object(j.jsx)("span",{children:"Log out"})]})]}),Object(j.jsx)("div",{className:"main",children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{exact:!0,path:"/",children:Object(j.jsx)(O,{})}),Object(j.jsx)(l.b,{path:"/measure/:id",children:Object(j.jsx)(v,{})}),Object(j.jsx)(l.b,{path:"/admin",children:Object(j.jsx)(g,{})})]})})]}):Object(j.jsx)(w,{})})}),N=n(28),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MEASUREMENTS":return t.measurements;case"ADD_MEASURE":return[].concat(Object(N.a)(e),[t.measure]);case"ADD_MEASUREMENT":for(var n=0;n<e.length;n+=1)e[n].id===t.measureId&&e[n].list.push(t.measurement);return e;default:return e}},y=Object(i.b)({measurements:k}),E=Object(i.c)(y);s.a.render(Object(j.jsx)(a.a,{store:E,children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.2df8834f.chunk.js.map