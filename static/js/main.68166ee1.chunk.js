(this["webpackJsonpbaby-tracker-front"]=this["webpackJsonpbaby-tracker-front"]||[]).push([[0],{38:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(17),s=n.n(r),a=n(5),i=n(13),o=(n(38),n(10)),u=n(11),l=n(4),j=n(23),d=n(26),m=(n(42),n(1)),b=function(e){var t=e.measure,n=t.measurements;return Object(m.jsx)(u.a,{children:Object(m.jsxs)(u.b,{to:"/measure/".concat(t.id),className:"measure link bg-cover col cross-center main-center",children:[n&&n.length?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"amount",children:"".concat(n[n.length-1].amount," ").concat(t.unit)}),n[n.length-2]?Object(m.jsxs)("div",{className:"row main-center dif",style:{color:n[n.length-1].amount>n[n.length-2].amount?"green":"red"},children:[n[n.length-1].amount>n[n.length-2].amount?"+":"",(n[n.length-1].amount-n[n.length-2].amount).toFixed(2)]}):Object(m.jsx)("div",{})]}):Object(m.jsx)("div",{className:"amount new",children:"Add new"}),Object(m.jsx)("div",{className:"type",children:t.item})]})})};b.defaultProps={measure:{}};var O=b,h=(n(45),function(){var e=Object(a.c)((function(e){return e.measures}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"row wrap",children:e.map((function(e){return Object(m.jsx)(O,{measure:e},e.id)}))})})}),f=function(e){switch(e){case"users":return"Couldn't Sign Up!";case"sessions":return"Couldn't Sign In!";case"measurements":return"Couldn't process Measurements!";case"measures":return"Couldn't process Measures!";default:return"Request couldn't be processed!"}},p=function(e,t,n,c){var r,s={method:e,headers:{"Content-Type":"application/json",token:localStorage.token}};"POST"===e&&(s.body=JSON.stringify(n)),fetch(new Request("".concat("https://suyash-baby-tracker.herokuapp.com/").concat(t),s)).then((function(e){if(!e.ok)throw r=e,Error(e);return e.json()})).then((function(e){c(e)})).catch((function(){r.json?r.json().then((function(e){c({error:e.error||f(t)})})):c({error:f(t)})}))},x=(n(46),function(e){var t=e.list,n=e.itemKey,c=e.displayAttr,r=e.toAddAttr,s=e.addItem,a=e.unit;return Object(m.jsxs)("div",{className:"list",children:[Object(m.jsx)("div",{className:"items",children:t.map((function(e){return Object(m.jsx)("div",{className:"row link",children:c.map((function(t){return Object(m.jsx)("div",{className:"flex item",children:Object(m.jsx)("div",{children:"".concat(e[t]," ").concat("amount"===t?a:"")})},t)}))},e[n])}))}),Object(m.jsxs)("form",{onSubmit:s,className:"row main-center wrap",children:[r.map((function(e){return Object(m.jsx)("input",{type:"text",name:e,placeholder:e},e)})),Object(m.jsx)("input",{type:"submit",value:"Add New",className:"link"})]})]})});x.defaultProps={list:[],unit:""};var v=x,g=function(e){return{type:"SET_TOKEN",token:e}},S=function(){var e=Object(a.b)(),t=Object(l.g)().id,n=Object(c.useState)({}),r=Object(o.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),d=j[0],b=j[1],O=Object(a.c)((function(e){return e.measures}));return Object(c.useEffect)((function(){!function(){for(var e=0;e<O.length;e+=1)if(O[e].id===parseInt(t,10)){i(O[e]);break}}()})),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"row cross-center main-center",children:Object(m.jsxs)("div",{className:"w-100 h-100",children:[Object(m.jsx)(v,{list:s.measurements,itemKey:"created_at",displayAttr:["date","amount"],toAddAttr:["amount"],unit:s.unit,addItem:function(t){t.preventDefault(),p("POST","measurements",{amount:t.target.amount.value,measure_id:s.id},(function(n){if(n.measurement){t.target.amount.value="";var c=n.measurement;c.measure_id=s.id,e(function(e){return{type:"ADD_MEASUREMENT",measurement:e}}(c))}else b(n.error)}))}}),Object(m.jsx)("div",{className:"error row main-center cross-center",children:d})]})})})},w=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(a.b)(),b=Object(a.c)((function(e){return e.measures}));return Object(c.useEffect)((function(){localStorage.token&&p("GET","admins",null,(function(e){e.admin?r(!1):r(!0)}))})),Object(m.jsx)("div",{children:n?Object(m.jsx)(l.a,{to:"/"}):Object(m.jsx)("div",{children:null===n?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{list:b,itemKey:"item",displayAttr:["item","unit"],toAddAttr:["item","unit"],addItem:function(e){e.preventDefault();var t={item:e.target.item.value,unit:e.target.unit.value};p("POST","measures",t,(function(n){n.id?(t.id=n.id,e.target.item.value="",e.target.unit.value="",d(function(e){return{type:"ADD_MEASURE",measure:e}}(t))):j(n.error)}))}}),Object(m.jsx)("div",{className:"error row main-center cross-center",children:u})]})})})},N=(n(47),function(){var e=Object(a.b)(),t=Object(c.useState)(!0),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),u=Object(o.a)(i,2),l=u[0],j=u[1],d=function(t,n){t.preventDefault(),p("POST",n,{name:t.target.name.value,password:t.target.password.value},(function(t){t.token?(localStorage.token=t.token,e(g(t.token))):j(t.error)}))};return Object(m.jsx)("div",{className:"login",children:Object(m.jsxs)("div",{children:[r?Object(m.jsx)("div",{className:"col cross-center main-center",children:Object(m.jsxs)("form",{onSubmit:function(e){d(e,"sessions")},className:"col cross-center",children:[Object(m.jsx)("h2",{children:"Sign In"}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(m.jsx)("input",{type:"submit",value:"Sign In",className:"link w-90"}),Object(m.jsx)("button",{type:"button",onClick:function(){s(!1)},className:"link button w-90",children:"or create new account"})]})}):Object(m.jsx)("div",{className:"col cross-center main-center",children:Object(m.jsxs)("form",{onSubmit:function(e){d(e,"users")},className:"col cross-center",children:[Object(m.jsx)("h2",{children:"Create new account"}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(m.jsx)("input",{type:"submit",value:"Sign Up",className:"link w-90"}),Object(m.jsx)("button",{type:"button",onClick:function(){s(!0)},className:"link button w-90",children:"Go to Sign In page"})]})}),Object(m.jsx)("div",{className:"error row main-center cross-center",children:l})]})})}),y=(n(48),function(){var e=Object(a.b)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.c)((function(e){return e.token}));return Object(c.useEffect)((function(){localStorage.token&&(i||e(g(localStorage.token)),p("GET","measurements",null,(function(t){t.measures&&t.measurements?e(function(e){return{type:"SET_MEASURES",result:e}}(t)):s(t.error)})))}),[i]),Object(m.jsx)("div",{children:localStorage.token||i?Object(m.jsxs)(u.a,{children:[Object(m.jsx)("div",{className:"error row main-center cross-center",children:r}),Object(m.jsxs)("header",{className:"row main-space-around",children:[Object(m.jsxs)(u.b,{to:"/",className:"col cross-center main-center shadow-5 link flex",children:[Object(m.jsx)(j.a,{icon:d.a,children:"Sign Out"}),Object(m.jsx)("span",{children:"Home"})]}),Object(m.jsxs)("button",{type:"button",onClick:function(){localStorage.clear(),e(g(""))},className:"link col cross-center main-center flex",children:[Object(m.jsx)(j.a,{icon:d.b,children:"Sign Out"}),Object(m.jsx)("span",{children:"Log out"})]})]}),Object(m.jsx)("div",{className:"main",children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",children:Object(m.jsx)(h,{})}),Object(m.jsx)(l.b,{path:"/measure/:id",children:Object(m.jsx)(S,{})}),Object(m.jsx)(l.b,{path:"/admin",children:Object(m.jsx)(w,{})})]})})]}):Object(m.jsx)(N,{})})}),k=n(29),E=n(28),A=n.n(E),T=function(e,t){var n=new Date(t.created_at),c=t;c.date=n.toLocaleString("default",{day:"numeric",month:"long",year:"numeric"}),e.measurements.push(c)},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MEASURES":return t.result.measures.forEach((function(e){var n=e;n.measurements=[],t.result.measurements.forEach((function(e){e.measure_id===n.id&&T(n,e)}))})),t.result.measures;case"ADD_MEASURE":return[].concat(Object(k.a)(e),[t.measure]);case"ADD_MEASUREMENT":var n=A.a.cloneDeep(e);return n.forEach((function(e){e.id===t.measurement.measure_id&&T(e,t.measurement)})),n;default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return t.token;default:return e}},M=Object(i.b)({measures:_,token:D}),U=Object(i.c)(M);s.a.render(Object(m.jsx)(a.a,{store:U,children:Object(m.jsx)(y,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.68166ee1.chunk.js.map