(this["webpackJsonpbaby-tracker-front"]=this["webpackJsonpbaby-tracker-front"]||[]).push([[0],{38:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(17),s=n.n(r),a=n(8),i=n(13),o=(n(38),n(10)),u=n(11),l=n(4),j=n(23),m=n(26),d=(n(42),n(1)),b=function(e){var t=e.measure,n=t.measurements;return Object(d.jsx)(u.a,{children:Object(d.jsxs)(u.b,{to:"/measure/".concat(t.id),className:"measure link bg-cover col cross-center main-center",children:[n&&n.length?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"amount",children:"".concat(n[n.length-1].amount," ").concat(t.unit)}),n[n.length-2]?Object(d.jsxs)("div",{className:"row main-center dif",style:{color:n[n.length-1].amount>n[n.length-2].amount?"green":"red"},children:[n[n.length-1].amount>n[n.length-2].amount?"+":"",(n[n.length-1].amount-n[n.length-2].amount).toFixed(2)]}):Object(d.jsx)("div",{})]}):Object(d.jsx)("div",{className:"amount new",children:"Add new"}),Object(d.jsx)("div",{className:"type",children:t.item})]})})};b.defaultProps={measure:{}};var O=b,h=(n(45),function(){var e=Object(a.c)((function(e){return e.measures}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"row wrap",children:e.map((function(e){return Object(d.jsx)(O,{measure:e},e.id)}))})})}),f=function(e){switch(e){case"users":return"Couldn't Sign Up!";case"sessions":return"Couldn't Sign In!";case"measurements":return"Couldn't process Measurements!";case"measures":return"Couldn't process Measures!";default:return"Request couldn't be processed!"}},x=function(e,t,n,c){var r,s={method:e,headers:{"Content-Type":"application/json",token:localStorage.token}};"POST"===e&&(s.body=JSON.stringify(n)),fetch(new Request("".concat("https://suyash-baby-tracker.herokuapp.com/").concat(t),s)).then((function(e){if(!e.ok)throw r=e,Error(e);return e.json()})).then((function(e){c(e)})).catch((function(){r.json?r.json().then((function(e){c({error:e.error||f(t)})})):c({error:f(t)})}))},p=(n(46),function(e){var t=e.list,n=e.itemKey,c=e.displayAttr,r=e.toAddAttr,s=e.addItem,a=e.unit;return Object(d.jsxs)("div",{className:"list",children:[Object(d.jsx)("div",{className:"items",children:t.map((function(e){return Object(d.jsx)("div",{className:"row link",children:c.map((function(t){return Object(d.jsx)("div",{className:"flex item",children:Object(d.jsx)("div",{children:"".concat(e[t]," ").concat("amount"===t?a:"")})},t)}))},e[n])}))}),Object(d.jsxs)("form",{onSubmit:s,className:"row main-center wrap",children:[r.map((function(e){return Object(d.jsx)("input",{type:"text",name:e,placeholder:e},e)})),Object(d.jsx)("input",{type:"submit",value:"Add New",className:"link"})]})]})});p.defaultProps={list:[],unit:""};var v=p,g=function(){var e=Object(a.b)(),t=Object(l.g)().id,n=Object(c.useState)({}),r=Object(o.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),m=j[0],b=j[1],O=Object(a.c)((function(e){return e.measures}));return Object(c.useEffect)((function(){!function(){for(var e=0;e<O.length;e+=1)if(O[e].id===parseInt(t,10)){i(O[e]);break}}()})),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"row cross-center main-center",children:Object(d.jsxs)("div",{className:"w-100 h-100",children:[Object(d.jsx)(v,{list:s.measurements,itemKey:"created_at",displayAttr:["date","amount"],toAddAttr:["amount"],unit:s.unit,addItem:function(t){t.preventDefault(),x("POST","measurements",{amount:t.target.amount.value,measure_id:s.id},(function(n){if(n.measurement){t.target.amount.value="";var c=n.measurement;c.measure_id=s.id,e(function(e){return{type:"ADD_MEASUREMENT",measurement:e}}(c))}else b(n.error)}))}}),Object(d.jsx)("div",{className:"error row main-center cross-center",children:m})]})})})},w=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],j=i[1],m=Object(a.b)(),b=Object(a.c)((function(e){return e.measures}));return Object(c.useEffect)((function(){localStorage.token&&x("GET","admins",null,(function(e){e.admin?r(!1):r(!0)}))})),Object(d.jsx)("div",{children:n?Object(d.jsx)(l.a,{to:"/"}):Object(d.jsx)("div",{children:null===n?Object(d.jsx)("div",{}):Object(d.jsxs)("div",{children:[Object(d.jsx)(v,{list:b,itemKey:"item",displayAttr:["item","unit"],toAddAttr:["item","unit"],addItem:function(e){e.preventDefault();var t={item:e.target.item.value,unit:e.target.unit.value};x("POST","measures",t,(function(n){n.id?(t.id=n.id,e.target.item.value="",e.target.unit.value="",m(function(e){return{type:"ADD_MEASURE",measure:e}}(t))):j(n.error)}))}}),Object(d.jsx)("div",{className:"error row main-center cross-center",children:u})]})})})},S=(n(47),function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),i=a[0],u=a[1],l=function(e,t){e.preventDefault(),x("POST",t,{name:e.target.name.value,password:e.target.password.value},(function(e){e.token?(localStorage.token=e.token,window.location.reload()):u(e.error)}))};return Object(d.jsx)("div",{className:"login",children:Object(d.jsxs)("div",{children:[n?Object(d.jsx)("div",{className:"col cross-center main-center",children:Object(d.jsxs)("form",{onSubmit:function(e){l(e,"sessions")},className:"col cross-center",children:[Object(d.jsx)("h2",{children:"Sign In"}),Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(d.jsx)("input",{type:"submit",value:"Sign In",className:"link w-90"}),Object(d.jsx)("button",{type:"button",onClick:function(){r(!1)},className:"link button w-90",children:"or create new account"})]})}):Object(d.jsx)("div",{className:"col cross-center main-center",children:Object(d.jsxs)("form",{onSubmit:function(e){l(e,"users")},className:"col cross-center",children:[Object(d.jsx)("h2",{children:"Create new account"}),Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Username"}),Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(d.jsx)("input",{type:"submit",value:"Sign Up",className:"link w-90"}),Object(d.jsx)("button",{type:"button",onClick:function(){r(!0)},className:"link button w-90",children:"Go to Sign In page"})]})}),Object(d.jsx)("div",{className:"error row main-center cross-center",children:i})]})})}),N=(n(48),function(){var e=Object(a.b)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){localStorage.token&&x("GET","measurements",null,(function(t){t.measures&&t.measurements?e(function(e){return{type:"SET_MEASURES",result:e}}(t)):s(t.error)}))})),Object(d.jsx)("div",{children:localStorage.token?Object(d.jsxs)(u.a,{children:[Object(d.jsx)("div",{className:"error row main-center cross-center",children:r}),Object(d.jsxs)("header",{className:"row main-space-around",children:[Object(d.jsxs)(u.b,{to:"/",className:"col cross-center main-center shadow-5 link flex",children:[Object(d.jsx)(j.a,{icon:m.a,children:"Sign Out"}),Object(d.jsx)("span",{children:"Home"})]}),Object(d.jsxs)("button",{type:"button",onClick:function(){localStorage.clear(),window.location.reload()},className:"link col cross-center main-center flex",children:[Object(d.jsx)(j.a,{icon:m.b,children:"Sign Out"}),Object(d.jsx)("span",{children:"Log out"})]})]}),Object(d.jsx)("div",{className:"main",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/",children:Object(d.jsx)(h,{})}),Object(d.jsx)(l.b,{path:"/measure/:id",children:Object(d.jsx)(g,{})}),Object(d.jsx)(l.b,{path:"/admin",children:Object(d.jsx)(w,{})})]})})]}):Object(d.jsx)(S,{})})}),y=n(29),k=n(28),E=n.n(k),A=function(e,t){var n=new Date(t.created_at),c=t;c.date=n.toLocaleString("default",{day:"numeric",month:"long",year:"numeric"}),e.measurements.push(c)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MEASURES":for(var n=0;n<t.result.measures.length;n+=1){var c=t.result.measures[n];c.measurements=[];for(var r=0;r<t.result.measurements.length;r+=1){var s=t.result.measurements[r];s.measure_id===c.id&&A(c,s)}}return t.result.measures;case"ADD_MEASURE":return[].concat(Object(y.a)(e),[t.measure]);case"ADD_MEASUREMENT":for(var a=E.a.cloneDeep(e),i=0;i<a.length;i+=1)a[i].id===t.measurement.measure_id&&A(a[i],t.measurement);return a;default:return e}},_=Object(i.b)({measures:D}),T=Object(i.c)(_);s.a.render(Object(d.jsx)(a.a,{store:T,children:Object(d.jsx)(N,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.4e19a465.chunk.js.map